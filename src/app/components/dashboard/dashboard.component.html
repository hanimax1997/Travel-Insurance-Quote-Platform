<app-header></app-header>
<div>
    <div class="min-h-[40rem] mx-auto py-12 px-4 sm:px-6 lg:px-8">
        <div class="min-h-[35rem] grid bg-white">
            <div class="grid p-5">
                <div class="flex justify-between">
                  <h1 class="p-5 text-xl font-semibold text-primary-400">
                      Contrats Voyage Souscrits
                  </h1>
                  <button (click)="goToContrat()" class="px-3 m-2.5 inline-flex items-center gap-x-1 text-sm font-semibold border border-transparent bg-primary-400 text-white hover:bg-primary-100 focus:outline-none focus:bg-primary-100">
                    Souscription Voyagiste
                  </button>
                </div>
                <div class="flex flex-col border" data-hs-datatable='{
                    "pageLength": 10,
                    "pagingOptions": {
                      "pageBtnClasses": "min-w-[40px] flex justify-center items-center text-gray-800 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 py-2.5 text-sm rounded-full disabled:opacity-50 disabled:pointer-events-none"
                    }
                  }'>
                    <div class="overflow-x-auto min-h-[520px] ">
                      <div class="min-w-full inline-block align-middle">
                        <div class="overflow-hidden">
                          <table class="min-w-full">
                            <thead class="border-b border-gray-200 bg-gray-200">
                              <tr>
                                <th scope="col" class="py-1 group text-start focus:outline-none">
                                  <div class="p-4 inline-flex items-center border border-transparent text-base text-primary-400 font-semibold">
                                    N°.
                                  </div>
                                </th>
                  
                                <th scope="col" class="py-1 group text-start focus:outline-none">
                                  <div class="p-4 inline-flex items-center border border-transparent text-base text-primary-400 font-semibold">
                                    Date d'effet
                                  </div>
                                </th>
                  
                                <th scope="col" class="py-1 group text-start focus:outline-none">
                                  <div class="p-4 inline-flex items-center border border-transparent text-base text-primary-400 font-semibold">
                                    Date de souscription
                                  </div>
                                </th>
                  
                                <th scope="col" class="py-1 group text-start focus:outline-none">
                                  <div class="p-4 inline-flex items-center border border-transparent text-base text-primary-400 font-semibold">
                                    Nom ou Raison sociale
                                  </div>
                                </th>
                  
                                <th scope="col" class="py-1 group text-start focus:outline-none">
                                  <div class="p-4 inline-flex items-center border border-transparent text-base text-primary-400 font-semibold">
                                    Statut
                                  </div>
                                </th>
                              </tr>
                            </thead>
                  
                            <tbody class="divide-y divide-gray-200">
                            @for (item of contrats; track item.idContrat; let idx = $index) {
                              <tr>
                                <td class="p-3 whitespace-nowrap text-sm font-medium text-gray-800">{{ item.idContrat }}</td>
                                <td class="p-3 whitespace-nowrap text-sm text-gray-800">{{ item.dateEffet | dateFormatPipe }}</td>
                                <td class="p-3 whitespace-nowrap text-sm text-gray-800">{{ item.auditDate | dateFormatPipe }}</td>
                                <td class="p-3 whitespace-nowrap text-sm text-gray-800">
                                    @if (item.raisonSocial==null) {
                                        {{item?.nom }}  {{item?.prenom}}
                                    } @else {
                                        {{item?.raisonSocial}}
                                    }
                                </td>
                                <td class="p-3 whitespace-nowrap text-sm text-gray-800">
                                  <span class="inline-flex items-center gap-x-1.5 py-2 px-3 rounded-full text-sm font-semibold" [style]="(item.statut.idParam | statutColor)">
                                    {{ item.statut.description }}     
                                  </span>
                                </td>

                              </tr>
                            }
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>
                    <div class="flex justify-end mt-4">
                        <div class="flex items-center justify-end text-xs text-gray-700">item {{ nbrContrat - nbrContratPage + 1 }} – {{ nbrContrat - nbrContratPage + 10 }} of {{ nbrContrat }}</div>
                        <button (click)="pagination(0)" type="button" class="p-2.5 min-w-[40px] inline-flex justify-center items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none" data-hs-datatable-paging-prev="">
                          <span aria-hidden="true">«</span>
                        </button>
                        <button (click)="pagination(1)" type="button" class="p-2.5 min-w-[40px] inline-flex justify-center items-center gap-x-2 text-sm rounded-full text-gray-800 hover:bg-gray-100 focus:outline-none focus:bg-gray-100 disabled:opacity-50 disabled:pointer-events-none" data-hs-datatable-paging-next="">
                          <span aria-hidden="true">»</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>